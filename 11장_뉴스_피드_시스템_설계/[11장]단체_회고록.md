# 🧾 대규모 시스템 설계 스터디 회고록 – 11장

**일시:** 2025년 7월 16일 (수) 오후 9시 ~ 10시 10분

**참여자:** 박용훈, 전희진, 수빈, 최선강

---

## ✅ 질문 중심 회고 요약

### 🧑‍💻 수빈

**💬 질문 1**

> 이미 팬아웃 된 뉴스 피드에서 삭제 처리는 어떻게 해야할까요?

* **푸시 방식에서의 삭제**: 생성 시 푸시 방식을 사용했다면 삭제도 동일하게 푸시로 처리하는 것이 일관성 측면에서 합리적
  * 삭제도 결국 "쓰기" 작업이므로 기존 푸시 인프라의 부하를 고려하여 설계했다면 삭제 처리도 감당 가능
* **이벤트 소싱 관점**: 생성 이벤트와 대응하는 삭제 이벤트를 팬아웃해야 함
  * 삭제 토큰 발행 또는 큐에서 처리하는 방식 활용
* **다양한 삭제 처리 방식**:
  * **즉시 삭제**: 삭제 시점에 실시간으로 모든 팬아웃된 피드에서 제거
  * **지연 삭제**: 소프트 디리트 플래그 설정 후 렌더링 시점에 삭제 반영 (성능 최적화)
  * **톰스톤(Tombstone) 방식**: 삭제 플래그 설정 후 백그라운드 워커가 비동기적으로 정리
* **민감 콘텐츠 우선 처리**: 신고된 콘텐츠나 정지된 유저의 게시물은 실시간 삭제, 일반 삭제는 지연 처리로 차등 적용


---

### 🧑‍💻 최선강

**💬 질문 1**

> 콘텐츠 수정, 삭제가 발생했을 때 푸시 모델, 풀 모델 중 어떤 게 좋을까요?

* **책에서는 풀 모델을 권장**하지만 상황에 따라 달라질 수 있음
* **푸시 모델의 단점 - 핫키(Hot Key) 문제**:
  * 팔로워가 많은 유명 인플루언서가 포스트를 올리면 수백만 명의 피드를 동시에 갱신해야 함
  * 윌 스미스, 톰 크루즈 등 유명인의 포스트 업데이트 시 대규모 팬아웃 필요
  * 인프라 부하, 메시지 큐, DB I/O 병목 현상 발생
* **풀 모델의 단점**:
  * 뉴스 피드를 읽는 데 많은 시간 소요 (실시간 집계 필요)
* **상황별 선택 기준**:
  * **일반적인 상황**: 풀링 방식이 더 안정적
  * **뉴스 피드가 큰 경우**: 푸시 방식이 유리 (미리 계산된 결과 조회)
  * **팔로워 수 제한이 있는 시스템**: 푸시 방식이 효율적

---

### 🧑‍💻 박용훈

**💬 질문 1**

> 포스팅 전송(팬아웃) 서비스를 구축한다면, 푸시 방식, 풀 방식의 두 가지를 어떻게 결합해서 장점만 가져갈 수 있을까요?

* **하이브리드 설계의 전제 조건** (시스템 분석 필수):
  * 팔로워 분포: 평균 몇 명에게 포스팅을 전송하는가
  * 활성 사용자 비율: 매일/매시간 피드를 확인하는 유저 비율
  * 포스팅 생성 빈도 vs 피드 조회 빈도 비율
  * 삭제/수정 이벤트 발생 빈도
* **핫/콜드 유저 기반 차등 전략**:
  * **핫 유저** (적극적 사용자): 푸시 방식 적용
    * 매일/매시간 피드를 확인하는 상위 x% 유저
    * 포스팅 생성 시 즉시 개인 피드 테이블에 삽입
    * 조회 시 바로 읽기만 하면 되므로 레이턴시 최소화
  * **콜드 유저** (비활성 사용자): 풀 방식 적용
    * 조회가 드문 나머지 유저들
    * 조회 시 실시간 집계로 피드 생성
    * 쓰기 부담 절약 및 저장 공간 절감
* **인기 작성자 처리 전략**:
  * **일반 작성자**: 모든 팔로워에게 풀 팬아웃
  * **고팔로워 작성자**: 부분 푸시 + 풀 방식 결합
    * 핫 유저에게만 푸시, 나머지는 조회 시 풀 집계
* **복합 고려사항**:
  * 단순히 핫/콜드 유저만이 아니라 작성자의 팔로워 수도 함께 고려 필요
  * 톱스타의 핫 유저 팔로워만 해도 수백만 명이므로 다중 기준으로 판단

---

## 📝 회고 및 개선 제안

* **복잡성에 대한 공감**: 뉴스 피드 시스템이 다른 시스템 설계에 비해 고려사항이 매우 많고 복잡함을 모든 참가자가 공감
* **실무 적용의 어려움**: 이론적으로는 이해되지만 실제 구현 시 고려해야 할 변수가 너무 많아 실무 적용에 대한 우려 표출
* **면접 단골 주제**: 고려사항이 많기 때문에 시스템 설계 면접에서 자주 출제되는 주제임을 인식
* **점진적 접근의 필요성**: 소규모(100명 수준)에서 시작하여 점진적으로 확장하는 것이 현실적

---

## 🔍 보완 학습 제안

* **실제 SNS 아키텍처 분석**: 페이스북, 인스타그램, 트위터의 실제 팬아웃 전략 사례 연구
* **추천 알고리즘 심화**: 협업 필터링, 콘텐츠 기반 필터링, 딥러닝 기반 추천 시스템 학습
* **이벤트 소싱 패턴**: 마이크로서비스에서 이벤트 기반 아키텍처 설계 실습
* **캐싱 전략**: Redis, Memcached 등을 활용한 뉴스 피드 캐싱 최적화
* **메시지 큐 실습**: Kafka, RabbitMQ를 이용한 대규모 팬아웃 시스템 구현
* **모니터링 및 알람**: 핫키 감지, 큐 백로그 모니터링 등 운영 관점의 시스템 설계
* **A/B 테스트 설계**: 푸시/풀 방식의 성능 비교를 위한 실험 설계 방법론