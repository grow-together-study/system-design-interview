# 🧾 대규모 시스템 설계 스터디 회고록 – 7장

**일시:** 2025년 7월 2일 (수) 오후 9시 ~ 10시 15분

**참여자:** 박이현, 박용훈, 전희진

---

## ✅ 질문 중심 회고 요약

### 🧑‍💻 박이현

**💬 질문 1**

> 분산 시스템에서 ID를 생성할 때 여러 데이터베이스 서버를 사용하는 경우, 지연시간(delay)을 낮추기 어려운 이유는 무엇일까요?

* 분산 환경에서 고유 ID를 생성하려면 중앙 발급 서버(예: 티켓 서버)를 두는 방식이 일반적
* 모든 노드가 이 서버에 요청을 보내면 네트워크 왕복 비용으로 인해 **응답 지연**이 발생함
* 또한, 여러 DB 간 **상태 동기화 비용** 및 장애 시 복구 절차가 복잡해져 시스템 응답성 저하
* 결론: 분산 DB 구조에서는 **ID 발급 병목, 장애 허용성, 응답 시간** 측면에서 단일화된 방식은 성능 저하 우려 있음

**💬 질문 2**

> 트위터 Snowflake 알고리즘이 고성능 분산 ID 생성 시스템으로 채택되는 이유는?

* 타임스탬프 기반 구조 → **시간 정렬 가능**
* 고유 ID 구성 요소:

  * 시간 정보
  * 머신 ID
  * 시퀀스 번호
* 장점:

  * UUID보다 짧고 정렬 가능
  * 동시에 생성되어도 중복 방지
  * 정렬 가능한 ID → **인덱스 성능 최적화**
* 실무에서도 Redis나 Kafka 등과 함께 많이 사용됨

---

### 🧑‍💻 박용훈

**💬 질문 1**

> UUID보다 Snowflake를 선호하는 이유는?

* UUID:

  * 128비트, 무작위 생성
  * 정렬 불가능 → **인덱스 최적화 불리**
  * 데이터 크기 큼, 성능 저하 유발
* Snowflake:

  * 시간 순 정렬 가능 → **쿼리 최적화 유리**
  * 중복 방지를 위해 서버 ID, 시퀀스 포함
  * 국비 프로젝트에서 데이터베이스 PK보다 **외부 노출용 ID**로 UUID 사용 경험 있음

---

### 🧑‍💻 전희진

**💬 질문 1**

> 다중 마스터 복제, UUID, 티켓 서버는 각각 어떤 상황에 적합한가요?

* UUID

  * 보안/비노출이 중요한 API 응답용 ID
  * 사용자 수 노출 방지 필요 시
  * 단점: 크기 큼, 인덱스 최적화에 부적합

* 티켓 서버

  * **재고 차감/순서 보장**이 중요한 서비스
  * 단일 서버 장애 시 리스크 큼
  * 적은 트래픽, 중앙화 가능 환경에서만 사용

* 다중 마스터 복제

  * 일반적인 분산 시스템 환경에서 사용
  * 데이터 충돌 감지/해결 정책 중요
  * 쓰기 동시성 문제 고려 필요

**💡 실무 응용 사례**

* 박용훈: 과거 프로젝트에서 **PK는 오토 인크리먼트**, 외부 노출 ID는 UUID를 함께 저장하여 사용
* 클라이언트와의 통신은 UUID로 진행 → 보안 측면 보완
* 유효 ID 저장 방식은 DB 생성 또는 애플리케이션 생성 방식 모두 존재 (PostgreSQL 등 일부 DB만 지원)

---

## 📝 회고 및 개선 제안

* UUID vs Snowflake 비교 시 **정렬 가능성, 인덱싱 최적화, ID 크기** 등의 실제 성능 차이를 실습 기반으로 확인해보는 것이 효과적
* 단순 ID 생성 기술 비교를 넘어서, **서비스 특성에 따른 ID 전략 설계 기준**을 논의한 점이 유익함
* 각자 실무 경험 기반 접근이 많았고, Snowflake 구성 요소를 명확히 이해함으로써 설계 관점에서의 인사이트도 도출됨

---

## 🔍 보완 학습 제안

* UUID 생성 방식 및 버전별 차이 (v1, v4, v7 등) 비교
* Snowflake ID 생성 로직 구현 실습 (Java/Kotlin/Go)
* 대규모 ID 충돌 방지 전략 비교: 티켓 서버 vs Snowflake vs UUID
* PK와 외부 노출용 ID 분리 전략 도입 시, 정합성 유지 방법 실습
* Kafka, Redis, MySQL 등에서 ID 정렬 특성과 성능 영향 분석